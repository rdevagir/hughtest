{"nodes":{"Register_Period":{"action":"register","parameters":{"label":"Period","name":"Period"},"sources":["Extract_Period"]},"join(NormilizeForecastingPredictionTrendForTrendingPerformanceChartFlattenForecastHierarchy)":{"action":"augment","parameters":{"leftKey":["Owner_ID"],"operation":"LookupSingleValue","relationship":"Manager","rightKey":["Id"],"rightSelect":["Name","UserRoleId","Managers"]},"sources":["NormilizeForecastingPredictionTrendForTrendingPerformanceChart","flatten(ForecastHierarchy)"]},"Extract_Users":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Username"},{"name":"Name"},{"name":"FirstName"},{"name":"LastName"},{"name":"UserRoleId"},{"name":"UserType"},{"name":"IsActive"},{"name":"FullPhotoUrl"},{"name":"SmallPhotoUrl"},{"name":"ForecastEnabled"}],"object":"User","runtime":{"SFDCtoken":"SFDCtoken"}}},"append(ForecastingItem,ForecastingPredictionTrend)":{"action":"append","parameters":{},"sources":["join(mergeF3AwithF4FlattenForecastHierarchy)","join(NormilizeForecastingPredictionTrendForTrendingPerformanceChartFlattenForecastHierarchy)"]},"Register_Users":{"action":"register","parameters":{"label":"User","name":"User1"},"sources":["join(User,MgrRole)"]},"Register_ForecastingPrediction":{"action":"register","parameters":{"label":"ForecastingPrediction","name":"ForecastingPrediction","rowLevelSecurityFilter":"'Manager.Managers' == \"$User.Id\" || 'ForecastOwnerId' == \"$User.Id\"","runtime":{"row_level_security_filter":"'Manager.Managers' == \"$User.Id\" || 'ForecastOwnerId' == \"$User.Id\""}},"sources":["join(filter(ForecastingPrediction), flatten(ForecastHierarchy))"]},"join(filter(ForecastingQuota), flatten(ForecastHierarchy))":{"action":"augment","parameters":{"leftKey":["QuotaOwnerId"],"operation":"LookupSingleValue","relationship":"Manager","rightKey":["Id"],"rightSelect":["Name","UserRoleId","Managers"]},"sources":["filter(ForecastingQuota)","flatten(ForecastHierarchy)"]},"join(User,MgrRole)":{"action":"augment","parameters":{"leftKey":["Role.ParentRoleId"],"operation":"LookupSingleValue","relationship":"MgrRole","rightKey":["Id"],"rightSelect":["ForecastUserId"]},"sources":["join(Users,UserRole)","Extract_UserRole"]},"filter(Users)":{"action":"filter","parameters":{"filter":"ForecastEnabled:EQ:true"},"sources":["Extract_Users"]},"filter(ForecastingPredictionTrend)":{"action":"filter","parameters":{"filter":"Type.DeveloperName:EQ:OpportunityRevenue"},"sources":["join(ForecastingPredictionTrend,ForecastingType)"]},"join(Users,UserRole)":{"action":"augment","parameters":{"leftKey":["UserRoleId"],"operation":"LookupSingleValue","relationship":"Role","rightKey":["Id"],"rightSelect":["ParentRoleId","ForecastUserId"]},"sources":["filter(Users)","Extract_UserRole"]},"filter(ForecastingItem only F3A)":{"action":"computeExpression","parameters":{"computedFields":[{"format":"yyyy-MM-dd","label":"Date","name":"Date","saqlExpression":"toDate('PeriodId.EndDate', \"yyyy-MM-dd\")","type":"Date"},{"label":"Value","name":"Value","precision":18,"saqlExpression":"AmountWithoutManagerAdjustment","scale":5,"type":"Numeric"},{"label":"Type","name":"Type","saqlExpression":"\"AmountWithoutManagerAdjustment\"","type":"Text"},{"label":"Period_ID","name":"Period_ID","saqlExpression":"PeriodId","type":"Text"},{"label":"ForecastingType_ID","name":"ForecastingType_ID","saqlExpression":"ForecastingTypeId","type":"Text"},{"label":"Owner_ID","name":"Owner_ID","saqlExpression":"OwnerId","type":"Text"},{"label":"Category","name":"Category","saqlExpression":"ForecastingItemCategory","type":"Text"}],"mergeWithSource":false},"sources":["join(ForecastingItem, Period)"]},"filter(ForecastingItem only F4)":{"action":"computeExpression","parameters":{"computedFields":[{"format":"yyyy-MM-dd","label":"Date","name":"Date","saqlExpression":"toDate('PeriodId.EndDate', \"yyyy-MM-dd\")","type":"Date"},{"label":"Value","name":"Value","precision":18,"saqlExpression":"ForecastAmount","scale":5,"type":"Numeric"},{"label":"Type","name":"Type","saqlExpression":"\"ForecastAmount\"","type":"Text"},{"label":"Period_ID","name":"Period_ID","saqlExpression":"PeriodId","type":"Text"},{"label":"ForecastingType_ID","name":"ForecastingType_ID","saqlExpression":"ForecastingTypeId","type":"Text"},{"label":"Owner_ID","name":"Owner_ID","saqlExpression":"OwnerId","type":"Text"},{"label":"Category","name":"Category","saqlExpression":"ForecastingItemCategory","type":"Text"}],"mergeWithSource":false},"sources":["join(ForecastingItem, Period)"]},"Extract_ForecastingPrediction":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Amount"},{"name":"AmountHigherBound"},{"name":"AmountLowerBound"},{"name":"ForecastOwnerId"},{"name":"ForecastingTypeId"},{"name":"IsDeleted"},{"name":"Id"},{"name":"SystemModstamp"},{"name":"PeriodId"}],"object":"ForecastingPrediction"}},"join(ForecastingItem,ForecastingType)":{"action":"augment","parameters":{"leftKey":["ForecastingTypeId"],"relationship":"Type","rightKey":["Id"],"rightSelect":["IsActive","DeveloperName","IsAmount","IsQuantity"]},"sources":["Extract_ForecastingItem","Extract_ForecastingType"]},"filter(ForecastingQuota)":{"action":"filter","parameters":{"filter":"Type.DeveloperName:EQ:OpportunityRevenue"},"sources":["join(ForecastingQuota,ForecastingType)"]},"Extract_ForecastingQuota":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"IsAmount"},{"name":"IsQuantity"},{"name":"ProductFamily"},{"name":"QuotaAmount"},{"name":"QuotaOwnerId"},{"name":"QuotaQuantity"},{"name":"SystemModstamp"},{"name":"PeriodId"},{"name":"ForecastingTypeId"}],"object":"ForecastingQuota"}},"join(ForecastingItem, Period)":{"action":"augment","parameters":{"leftKey":["PeriodId"],"operation":"LookupSingleValue","relationship":"PeriodId","rightKey":["Id"],"rightSelect":["EndDate"]},"sources":["filter(ForecastingItem)","Extract_Period"]},"Register_TrendingPerformanceChartData":{"action":"register","parameters":{"label":"TrendingPerformanceChartData","name":"TrendingPerformanceChartData","rowLevelSecurityFilter":"('Owner_ID' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\" || 'Type' == \"Actual\" || 'Type' == \"Predicted\")) || ('Manager.Managers' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\" || 'Type' == \"ForecastAmount\" || 'Type' == \"Actual\" || 'Type' == \"Predicted\"))","runtime":{"SFDCtoken":"SFDCtoken","row_level_security_filter":"('Owner_ID' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\" || 'Type' == \"Actual\" || 'Type' == \"Predicted\")) || ('Manager.Managers' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\" || 'Type' == \"ForecastAmount\" || 'Type' == \"Actual\" || 'Type' == \"Predicted\"))"}},"sources":["append(ForecastingItem,ForecastingPredictionTrend)"]},"join(ForecastingPredictionTrend,ForecastingType)":{"action":"augment","parameters":{"leftKey":["ForecastingTypeId"],"relationship":"Type","rightKey":["Id"],"rightSelect":["IsActive","DeveloperName","IsAmount","IsQuantity"]},"sources":["Extract_ForecastingPredictionTrend","Extract_ForecastingType"]},"Extract_Period":{"action":"sobjectDigest","parameters":{"fields":[{"name":"EndDate"},{"name":"Id"},{"name":"FullyQualifiedLabel"},{"name":"StartDate"},{"name":"Type"}],"object":"Period"}},"Extract_ForecastingItem":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"AmountWithoutAdjustments"},{"name":"AmountWithoutManagerAdjustment"},{"name":"ForecastAmount"},{"name":"ForecastCategoryName"},{"name":"ForecastingItemCategory"},{"name":"HasAdjustment"},{"name":"HasOwnerAdjustment"},{"name":"OwnerId"},{"name":"PeriodId"},{"name":"ForecastingTypeId"},{"name":"ProductFamily"}],"object":"ForecastingItem","runtime":{"SFDCtoken":"SFDCtoken"}}},"flatten(ForecastHierarchy)":{"action":"flatten","parameters":{"includeSelfId":false,"multiField":{"isSystemField":false,"label":"Managers","name":"Managers"},"parentField":"MgrRole.ForecastUserId","pathField":{"isSystemField":false,"label":"ManagerPath","name":"ManagerPath"},"selfField":"Id"},"sources":["join(User,MgrRole)"]},"Extract_ForecastingPredictionTrend":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Amount"},{"name":"ForecastingPredictionTrendType"},{"name":"PeriodId"},{"name":"AsOfDate"},{"name":"ForecastingTypeId"},{"name":"ForecastOwnerId"},{"name":"SystemModstamp"}],"object":"ForecastingPredictionTrend"}},"join(ForecastingQuota,ForecastingType)":{"action":"augment","parameters":{"leftKey":["ForecastingTypeId"],"relationship":"Type","rightKey":["Id"],"rightSelect":["IsActive","DeveloperName","IsAmount","IsQuantity"]},"sources":["Extract_ForecastingQuota","Extract_ForecastingType"]},"filter(ForecastingItem)":{"action":"filter","parameters":{"filter":"Type.DeveloperName:EQ:OpportunityRevenue"},"sources":["join(ForecastingItem,ForecastingType)"]},"join(filter(ForecastingPrediction), flatten(ForecastHierarchy))":{"action":"augment","parameters":{"leftKey":["ForecastOwnerId"],"operation":"LookupSingleValue","relationship":"Manager","rightKey":["Id"],"rightSelect":["Name","UserRoleId","Managers"]},"sources":["filter(ForecastingPrediction)","flatten(ForecastHierarchy)"]},"Register_ForecastingItem":{"action":"register","parameters":{"label":"ForecastingItem","name":"ForecastingItem","rowLevelSecurityFilter":"('Owner_ID' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\")) || ('Manager.Managers' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\" || 'Type' == \"ForecastAmount\"))","runtime":{"SFDCtoken":"SFDCtoken","row_level_security_filter":"('Owner_ID' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\")) || ('Manager.Managers' == \"$User.Id\" && ('Type' == \"AmountWithoutManagerAdjustment\" || 'Type' == \"ForecastAmount\"))"}},"sources":["join(mergeF3AwithF4FlattenForecastHierarchy)"]},"filter(ForecastingPrediction)":{"action":"filter","parameters":{"filter":"Type.DeveloperName:EQ:OpportunityRevenue"},"sources":["join(ForecastingPrediction,ForecastingType)"]},"join(mergeF3AwithF4FlattenForecastHierarchy)":{"action":"augment","parameters":{"leftKey":["Owner_ID"],"operation":"LookupSingleValue","relationship":"Manager","rightKey":["Id"],"rightSelect":["Name","UserRoleId","Managers"]},"sources":["merge(F3A with F4)","flatten(ForecastHierarchy)"]},"Extract_UserRole":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"ParentRoleId"},{"name":"ForecastUserId"}],"object":"UserRole"}},"join(ForecastingPrediction,ForecastingType)":{"action":"augment","parameters":{"leftKey":["ForecastingTypeId"],"relationship":"Type","rightKey":["Id"],"rightSelect":["IsActive","DeveloperName","IsAmount","IsQuantity"]},"sources":["Extract_ForecastingPrediction","Extract_ForecastingType"]},"Register_ForecastingQuota":{"action":"register","parameters":{"label":"ForecastingQuota","name":"ForecastingQuota","rowLevelSecurityFilter":"'Manager.Managers' == \"$User.Id\" || 'QuotaOwnerId' == \"$User.Id\"","runtime":{"row_level_security_filter":"'Manager.Managers' == \"$User.Id\" || 'QuotaOwnerId' == \"$User.Id\""}},"sources":["join(filter(ForecastingQuota), flatten(ForecastHierarchy))"]},"NormilizeForecastingPredictionTrendForTrendingPerformanceChart":{"action":"computeExpression","parameters":{"computedFields":[{"format":"yyyy-MM-dd","label":"Date","name":"Date","saqlExpression":"toDate(AsOfDate, \"yyyy-MM-dd\")","type":"Date"},{"label":"Type","name":"Type","saqlExpression":"ForecastingPredictionTrendType","type":"Text"},{"label":"Period_ID","name":"Period_ID","saqlExpression":"PeriodId","type":"Text"},{"label":"Value","name":"Value","precision":18,"saqlExpression":"Amount","scale":5,"type":"Numeric"},{"label":"ForecastingType_ID","name":"ForecastingType_ID","saqlExpression":"ForecastingTypeId","type":"Text"},{"label":"Owner_ID","name":"Owner_ID","saqlExpression":"ForecastOwnerId","type":"Text"},{"label":"Category","name":"Category","saqlExpression":"ForecastingPredictionTrendType","type":"Text"}],"mergeWithSource":false},"sources":["filter(ForecastingPredictionTrend)"]},"merge(F3A with F4)":{"action":"append","parameters":{},"sources":["filter(ForecastingItem only F3A)","filter(ForecastingItem only F4)"]},"Extract_ForecastingType":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"DeveloperName"},{"name":"MasterLabel"},{"name":"IsAmount"},{"name":"IsQuantity"},{"name":"IsActive"}],"object":"ForecastingType","runtime":{"SFDCtoken":"SFDCtoken"}}}}}